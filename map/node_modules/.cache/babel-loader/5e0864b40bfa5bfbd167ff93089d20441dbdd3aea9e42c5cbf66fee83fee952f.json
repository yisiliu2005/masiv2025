{"ast":null,"code":"// Generated by CoffeeScript 1.6.3\nvar Connection,\n  Consumer,\n  Dataset,\n  EventEmitter,\n  Operation,\n  Producer,\n  Query,\n  addExpr,\n  base64Lookup,\n  eelib,\n  expr,\n  extend,\n  handleLiteral,\n  handleOrder,\n  httpClient,\n  isArray,\n  isNumber,\n  isString,\n  rawToBase64,\n  toBase64,\n  toQuerystring,\n  __slice = [].slice,\n  __hasProp = {}.hasOwnProperty;\neelib = require('eventemitter2');\nEventEmitter = eelib.EventEmitter2 || eelib;\nhttpClient = require('superagent');\nisString = function (obj) {\n  return typeof obj === 'string';\n};\nisArray = function (obj) {\n  return Array.isArray(obj);\n};\nisNumber = function (obj) {\n  return !isNaN(parseFloat(obj));\n};\nextend = function () {\n  var k, source, sources, target, v, _i, _len;\n  target = arguments[0], sources = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n  for (_i = 0, _len = sources.length; _i < _len; _i++) {\n    source = sources[_i];\n    for (k in source) {\n      v = source[k];\n      target[k] = v;\n    }\n  }\n  return null;\n};\ntoBase64 = typeof Buffer !== \"undefined\" && Buffer !== null ? function (str) {\n  return new Buffer(str).toString('base64');\n} : (base64Lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='.split(''), rawToBase64 = typeof btoa !== \"undefined\" && btoa !== null ? btoa : function (str) {\n  var chr1, chr2, chr3, enc1, enc2, enc3, enc4, i, result;\n  result = [];\n  i = 0;\n  while (i < str.length) {\n    chr1 = str.charCodeAt(i++);\n    chr2 = str.charCodeAt(i++);\n    chr3 = str.charCodeAt(i++);\n    if (Math.max(chr1, chr2, chr3) > 0xFF) {\n      throw new Error('Invalid character!');\n    }\n    enc1 = chr1 >> 2;\n    enc2 = (chr1 & 3) << 4 | chr2 >> 4;\n    enc3 = (chr2 & 15) << 2 | chr3 >> 6;\n    enc4 = chr3 & 63;\n    if (isNaN(chr2)) {\n      enc3 = enc4 = 64;\n    } else if (isNaN(chr3)) {\n      enc4 = 64;\n    }\n    result.push(base64Lookup[enc1]);\n    result.push(base64Lookup[enc2]);\n    result.push(base64Lookup[enc3]);\n    result.push(base64Lookup[enc4]);\n  }\n  return result.join('');\n}, function (str) {\n  return rawToBase64(unescape(encodeURIComponent(str)));\n});\nhandleLiteral = function (literal) {\n  if (isString(literal)) {\n    return \"'\" + literal + \"'\";\n  } else if (isNumber(literal)) {\n    return literal;\n  } else {\n    return literal;\n  }\n};\nhandleOrder = function (order) {\n  if (/( asc$| desc$)/i.test(order)) {\n    return order;\n  } else {\n    return order + ' asc';\n  }\n};\naddExpr = function (target, args) {\n  var arg, k, v, _i, _len, _results;\n  _results = [];\n  for (_i = 0, _len = args.length; _i < _len; _i++) {\n    arg = args[_i];\n    if (isString(arg)) {\n      _results.push(target.push(arg));\n    } else {\n      _results.push(function () {\n        var _results1;\n        _results1 = [];\n        for (k in arg) {\n          v = arg[k];\n          _results1.push(target.push(\"\" + k + \" = \" + handleLiteral(v)));\n        }\n        return _results1;\n      }());\n    }\n  }\n  return _results;\n};\nexpr = {\n  and: function () {\n    var clause, clauses;\n    clauses = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    return function () {\n      var _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = clauses.length; _i < _len; _i++) {\n        clause = clauses[_i];\n        _results.push(\"(\" + clause + \")\");\n      }\n      return _results;\n    }().join(' and ');\n  },\n  or: function () {\n    var clause, clauses;\n    clauses = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    return function () {\n      var _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = clauses.length; _i < _len; _i++) {\n        clause = clauses[_i];\n        _results.push(\"(\" + clause + \")\");\n      }\n      return _results;\n    }().join(' or ');\n  },\n  gt: function (column, literal) {\n    return \"\" + column + \" > \" + handleLiteral(literal);\n  },\n  gte: function (column, literal) {\n    return \"\" + column + \" >= \" + handleLiteral(literal);\n  },\n  lt: function (column, literal) {\n    return \"\" + column + \" < \" + handleLiteral(literal);\n  },\n  lte: function (column, literal) {\n    return \"\" + column + \" <= \" + handleLiteral(literal);\n  },\n  eq: function (column, literal) {\n    return \"\" + column + \" = \" + handleLiteral(literal);\n  }\n};\ntoQuerystring = function (obj) {\n  var key, str, val;\n  str = [];\n  for (key in obj) {\n    if (!__hasProp.call(obj, key)) continue;\n    val = obj[key];\n    str.push(encodeURIComponent(key) + '=' + encodeURIComponent(val));\n  }\n  return str.join('&');\n};\nConnection = function () {\n  function Connection(dataSite, sodaOpts) {\n    var _ref;\n    this.dataSite = dataSite;\n    this.sodaOpts = sodaOpts != null ? sodaOpts : {};\n    if (!/^[a-z0-9-_.]+(:[0-9]+)?$/i.test(this.dataSite)) {\n      throw new Error('dataSite does not appear to be valid! Please supply a domain name, eg data.seattle.gov');\n    }\n    this.emitterOpts = (_ref = this.sodaOpts.emitterOpts) != null ? _ref : {\n      wildcard: true,\n      delimiter: '.',\n      maxListeners: 15\n    };\n    this.networker = function (opts, data) {\n      var client,\n        url,\n        _this = this;\n      url = \"https://\" + this.dataSite + opts.path;\n      client = httpClient(opts.method, url);\n      if (data != null) {\n        client.set('Accept', \"application/json\");\n      }\n      if (data != null) {\n        client.set('Content-type', \"application/json\");\n      }\n      if (this.sodaOpts.apiToken != null) {\n        client.set('X-App-Token', this.sodaOpts.apiToken);\n      }\n      if (this.sodaOpts.username != null && this.sodaOpts.password != null) {\n        client.set('Authorization', \"Basic \" + toBase64(\"\" + this.sodaOpts.username + \":\" + this.sodaOpts.password));\n      }\n      if (this.sodaOpts.accessToken != null) {\n        client.set('Authorization', \"OAuth \" + accessToken);\n      }\n      if (opts.query != null) {\n        client.query(opts.query);\n      }\n      if (data != null) {\n        client.send(data);\n      }\n      return function (responseHandler) {\n        return client.end(responseHandler || _this.getDefaultHandler());\n      };\n    };\n  }\n  Connection.prototype.getDefaultHandler = function () {\n    var emitter, handler;\n    this.emitter = emitter = new EventEmitter(this.emitterOpts);\n    return handler = function (error, response) {\n      var _ref;\n      if (response.ok) {\n        if (response.accepted) {\n          emitter.emit('progress', response.body);\n          setTimeout(function () {\n            return this.consumer.networker(opts)(handler);\n          }, 5000);\n        } else {\n          emitter.emit('success', response.body);\n        }\n      } else {\n        emitter.emit('error', (_ref = response.body) != null ? _ref : response.text);\n      }\n      return emitter.emit('complete', response);\n    };\n  };\n  return Connection;\n}();\nConsumer = function () {\n  function Consumer(dataSite, sodaOpts) {\n    this.dataSite = dataSite;\n    this.sodaOpts = sodaOpts != null ? sodaOpts : {};\n    this.connection = new Connection(this.dataSite, this.sodaOpts);\n  }\n  Consumer.prototype.query = function () {\n    return new Query(this);\n  };\n  Consumer.prototype.getDataset = function (id) {\n    var emitter;\n    return emitter = new EventEmitter(this.emitterOpts);\n  };\n  return Consumer;\n}();\nProducer = function () {\n  function Producer(dataSite, sodaOpts) {\n    this.dataSite = dataSite;\n    this.sodaOpts = sodaOpts != null ? sodaOpts : {};\n    this.connection = new Connection(this.dataSite, this.sodaOpts);\n  }\n  Producer.prototype.operation = function () {\n    return new Operation(this);\n  };\n  return Producer;\n}();\nOperation = function () {\n  function Operation(producer) {\n    this.producer = producer;\n  }\n  Operation.prototype.withDataset = function (datasetId) {\n    this._datasetId = datasetId;\n    return this;\n  };\n  Operation.prototype.truncate = function () {\n    var opts;\n    opts = {\n      method: 'delete'\n    };\n    opts.path = \"/resource/\" + this._datasetId;\n    return this._exec(opts);\n  };\n  Operation.prototype.add = function (data) {\n    var obj, opts, _data, _i, _len;\n    opts = {\n      method: 'post'\n    };\n    opts.path = \"/resource/\" + this._datasetId;\n    _data = JSON.parse(JSON.stringify(data));\n    delete _data[':id'];\n    delete _data[':delete'];\n    for (_i = 0, _len = _data.length; _i < _len; _i++) {\n      obj = _data[_i];\n      delete obj[':id'];\n      delete obj[':delete'];\n    }\n    return this._exec(opts, _data);\n  };\n  Operation.prototype[\"delete\"] = function (id) {\n    var opts;\n    opts = {\n      method: 'delete'\n    };\n    opts.path = \"/resource/\" + this._datasetId + \"/\" + id;\n    return this._exec(opts);\n  };\n  Operation.prototype.update = function (id, data) {\n    var opts;\n    opts = {\n      method: 'post'\n    };\n    opts.path = \"/resource/\" + this._datasetId + \"/\" + id;\n    return this._exec(opts, data);\n  };\n  Operation.prototype.replace = function (id, data) {\n    var opts;\n    opts = {\n      method: 'put'\n    };\n    opts.path = \"/resource/\" + this._datasetId + \"/\" + id;\n    return this._exec(opts, data);\n  };\n  Operation.prototype.upsert = function (data) {\n    var opts;\n    opts = {\n      method: 'post'\n    };\n    opts.path = \"/resource/\" + this._datasetId;\n    return this._exec(opts, data);\n  };\n  Operation.prototype._exec = function (opts, data) {\n    if (this._datasetId == null) {\n      throw new Error('no dataset given to work against!');\n    }\n    this.producer.connection.networker(opts, data)();\n    return this.producer.connection.emitter;\n  };\n  return Operation;\n}();\nQuery = function () {\n  function Query(consumer) {\n    this.consumer = consumer;\n    this._select = [];\n    this._where = [];\n    this._group = [];\n    this._having = [];\n    this._order = [];\n    this._offset = this._limit = this._q = null;\n  }\n  Query.prototype.withDataset = function (datasetId) {\n    this._datasetId = datasetId;\n    return this;\n  };\n  Query.prototype.soql = function (query) {\n    this._soql = query;\n    return this;\n  };\n  Query.prototype.select = function () {\n    var select, selects, _i, _len;\n    selects = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    for (_i = 0, _len = selects.length; _i < _len; _i++) {\n      select = selects[_i];\n      this._select.push(select);\n    }\n    return this;\n  };\n  Query.prototype.where = function () {\n    var args;\n    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    addExpr(this._where, args);\n    return this;\n  };\n  Query.prototype.having = function () {\n    var args;\n    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    addExpr(this._having, args);\n    return this;\n  };\n  Query.prototype.group = function () {\n    var group, groups, _i, _len;\n    groups = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    for (_i = 0, _len = groups.length; _i < _len; _i++) {\n      group = groups[_i];\n      this._group.push(group);\n    }\n    return this;\n  };\n  Query.prototype.order = function () {\n    var order, orders, _i, _len;\n    orders = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    for (_i = 0, _len = orders.length; _i < _len; _i++) {\n      order = orders[_i];\n      this._order.push(handleOrder(order));\n    }\n    return this;\n  };\n  Query.prototype.offset = function (offset) {\n    this._offset = offset;\n    return this;\n  };\n  Query.prototype.limit = function (limit) {\n    this._limit = limit;\n    return this;\n  };\n  Query.prototype.q = function (q) {\n    this._q = q;\n    return this;\n  };\n  Query.prototype.getOpts = function () {\n    var k, opts, queryComponents, v;\n    opts = {\n      method: 'get'\n    };\n    if (this._datasetId == null) {\n      throw new Error('no dataset given to work against!');\n    }\n    opts.path = \"/resource/\" + this._datasetId + \".json\";\n    queryComponents = this._buildQueryComponents();\n    opts.query = {};\n    for (k in queryComponents) {\n      v = queryComponents[k];\n      opts.query['$' + k] = v;\n    }\n    return opts;\n  };\n  Query.prototype.getURL = function () {\n    var opts, query;\n    opts = this.getOpts();\n    query = toQuerystring(opts.query);\n    return \"https://\" + this.consumer.dataSite + opts.path + (query ? \"?\" + query : \"\");\n  };\n  Query.prototype.getRows = function () {\n    var opts;\n    opts = this.getOpts();\n    this.consumer.connection.networker(opts)();\n    return this.consumer.connection.emitter;\n  };\n  Query.prototype._buildQueryComponents = function () {\n    var query;\n    query = {};\n    if (this._soql != null) {\n      query.query = this._soql;\n    } else {\n      if (this._select.length > 0) {\n        query.select = this._select.join(', ');\n      }\n      if (this._where.length > 0) {\n        query.where = expr.and.apply(this, this._where);\n      }\n      if (this._group.length > 0) {\n        query.group = this._group.join(', ');\n      }\n      if (this._having.length > 0) {\n        if (!(this._group.length > 0)) {\n          throw new Error('Having provided without group by!');\n        }\n        query.having = expr.and.apply(this, this._having);\n      }\n      if (this._order.length > 0) {\n        query.order = this._order.join(', ');\n      }\n      if (isNumber(this._offset)) {\n        query.offset = this._offset;\n      }\n      if (isNumber(this._limit)) {\n        query.limit = this._limit;\n      }\n      if (this._q) {\n        query.q = this._q;\n      }\n    }\n    return query;\n  };\n  return Query;\n}();\nDataset = function () {\n  function Dataset(data, client) {\n    this.data = data;\n    this.client = client;\n  }\n  return Dataset;\n}();\nextend(typeof exports !== \"undefined\" && exports !== null ? exports : this.soda, {\n  Consumer: Consumer,\n  Producer: Producer,\n  expr: expr,\n  _internal: {\n    Connection: Connection,\n    Query: Query,\n    Operation: Operation,\n    util: {\n      toBase64: toBase64,\n      handleLiteral: handleLiteral,\n      handleOrder: handleOrder\n    }\n  }\n});","map":{"version":3,"names":["Connection","Consumer","Dataset","EventEmitter","Operation","Producer","Query","addExpr","base64Lookup","eelib","expr","extend","handleLiteral","handleOrder","httpClient","isArray","isNumber","isString","rawToBase64","toBase64","toQuerystring","__slice","slice","__hasProp","hasOwnProperty","require","EventEmitter2","obj","Array","isNaN","parseFloat","k","source","sources","target","v","_i","_len","arguments","length","call","Buffer","str","toString","split","btoa","chr1","chr2","chr3","enc1","enc2","enc3","enc4","i","result","charCodeAt","Math","max","Error","push","join","unescape","encodeURIComponent","literal","order","test","args","arg","_results","_results1","and","clause","clauses","or","gt","column","gte","lt","lte","eq","key","val","dataSite","sodaOpts","_ref","emitterOpts","wildcard","delimiter","maxListeners","networker","opts","data","client","url","_this","path","method","set","apiToken","username","password","accessToken","query","send","responseHandler","end","getDefaultHandler","prototype","emitter","handler","error","response","ok","accepted","emit","body","setTimeout","consumer","text","connection","getDataset","id","operation","producer","withDataset","datasetId","_datasetId","truncate","_exec","add","_data","JSON","parse","stringify","update","replace","upsert","_select","_where","_group","_having","_order","_offset","_limit","_q","soql","_soql","select","selects","where","having","group","groups","orders","offset","limit","q","getOpts","queryComponents","_buildQueryComponents","getURL","getRows","apply","exports","soda","_internal","util"],"sources":["/Users/yisiliu/development/MASIV2025InternTest/map/node_modules/soda-js/lib/soda-js.js"],"sourcesContent":["// Generated by CoffeeScript 1.6.3\nvar Connection, Consumer, Dataset, EventEmitter, Operation, Producer, Query, addExpr, base64Lookup, eelib, expr, extend, handleLiteral, handleOrder, httpClient, isArray, isNumber, isString, rawToBase64, toBase64, toQuerystring,\n  __slice = [].slice,\n  __hasProp = {}.hasOwnProperty;\n\neelib = require('eventemitter2');\n\nEventEmitter = eelib.EventEmitter2 || eelib;\n\nhttpClient = require('superagent');\n\nisString = function(obj) {\n  return typeof obj === 'string';\n};\n\nisArray = function(obj) {\n  return Array.isArray(obj);\n};\n\nisNumber = function(obj) {\n  return !isNaN(parseFloat(obj));\n};\n\nextend = function() {\n  var k, source, sources, target, v, _i, _len;\n  target = arguments[0], sources = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n  for (_i = 0, _len = sources.length; _i < _len; _i++) {\n    source = sources[_i];\n    for (k in source) {\n      v = source[k];\n      target[k] = v;\n    }\n  }\n  return null;\n};\n\ntoBase64 = typeof Buffer !== \"undefined\" && Buffer !== null ? function(str) {\n  return new Buffer(str).toString('base64');\n} : (base64Lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='.split(''), rawToBase64 = typeof btoa !== \"undefined\" && btoa !== null ? btoa : function(str) {\n  var chr1, chr2, chr3, enc1, enc2, enc3, enc4, i, result;\n  result = [];\n  i = 0;\n  while (i < str.length) {\n    chr1 = str.charCodeAt(i++);\n    chr2 = str.charCodeAt(i++);\n    chr3 = str.charCodeAt(i++);\n    if (Math.max(chr1, chr2, chr3) > 0xFF) {\n      throw new Error('Invalid character!');\n    }\n    enc1 = chr1 >> 2;\n    enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n    enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n    enc4 = chr3 & 63;\n    if (isNaN(chr2)) {\n      enc3 = enc4 = 64;\n    } else if (isNaN(chr3)) {\n      enc4 = 64;\n    }\n    result.push(base64Lookup[enc1]);\n    result.push(base64Lookup[enc2]);\n    result.push(base64Lookup[enc3]);\n    result.push(base64Lookup[enc4]);\n  }\n  return result.join('');\n}, function(str) {\n  return rawToBase64(unescape(encodeURIComponent(str)));\n});\n\nhandleLiteral = function(literal) {\n  if (isString(literal)) {\n    return \"'\" + literal + \"'\";\n  } else if (isNumber(literal)) {\n    return literal;\n  } else {\n    return literal;\n  }\n};\n\nhandleOrder = function(order) {\n  if (/( asc$| desc$)/i.test(order)) {\n    return order;\n  } else {\n    return order + ' asc';\n  }\n};\n\naddExpr = function(target, args) {\n  var arg, k, v, _i, _len, _results;\n  _results = [];\n  for (_i = 0, _len = args.length; _i < _len; _i++) {\n    arg = args[_i];\n    if (isString(arg)) {\n      _results.push(target.push(arg));\n    } else {\n      _results.push((function() {\n        var _results1;\n        _results1 = [];\n        for (k in arg) {\n          v = arg[k];\n          _results1.push(target.push(\"\" + k + \" = \" + (handleLiteral(v))));\n        }\n        return _results1;\n      })());\n    }\n  }\n  return _results;\n};\n\nexpr = {\n  and: function() {\n    var clause, clauses;\n    clauses = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    return ((function() {\n      var _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = clauses.length; _i < _len; _i++) {\n        clause = clauses[_i];\n        _results.push(\"(\" + clause + \")\");\n      }\n      return _results;\n    })()).join(' and ');\n  },\n  or: function() {\n    var clause, clauses;\n    clauses = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    return ((function() {\n      var _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = clauses.length; _i < _len; _i++) {\n        clause = clauses[_i];\n        _results.push(\"(\" + clause + \")\");\n      }\n      return _results;\n    })()).join(' or ');\n  },\n  gt: function(column, literal) {\n    return \"\" + column + \" > \" + (handleLiteral(literal));\n  },\n  gte: function(column, literal) {\n    return \"\" + column + \" >= \" + (handleLiteral(literal));\n  },\n  lt: function(column, literal) {\n    return \"\" + column + \" < \" + (handleLiteral(literal));\n  },\n  lte: function(column, literal) {\n    return \"\" + column + \" <= \" + (handleLiteral(literal));\n  },\n  eq: function(column, literal) {\n    return \"\" + column + \" = \" + (handleLiteral(literal));\n  }\n};\n\ntoQuerystring = function(obj) {\n  var key, str, val;\n  str = [];\n  for (key in obj) {\n    if (!__hasProp.call(obj, key)) continue;\n    val = obj[key];\n    str.push(encodeURIComponent(key) + '=' + encodeURIComponent(val));\n  }\n  return str.join('&');\n};\n\nConnection = (function() {\n  function Connection(dataSite, sodaOpts) {\n    var _ref;\n    this.dataSite = dataSite;\n    this.sodaOpts = sodaOpts != null ? sodaOpts : {};\n    if (!/^[a-z0-9-_.]+(:[0-9]+)?$/i.test(this.dataSite)) {\n      throw new Error('dataSite does not appear to be valid! Please supply a domain name, eg data.seattle.gov');\n    }\n    this.emitterOpts = (_ref = this.sodaOpts.emitterOpts) != null ? _ref : {\n      wildcard: true,\n      delimiter: '.',\n      maxListeners: 15\n    };\n    this.networker = function(opts, data) {\n      var client, url,\n        _this = this;\n      url = \"https://\" + this.dataSite + opts.path;\n      client = httpClient(opts.method, url);\n      if (data != null) {\n        client.set('Accept', \"application/json\");\n      }\n      if (data != null) {\n        client.set('Content-type', \"application/json\");\n      }\n      if (this.sodaOpts.apiToken != null) {\n        client.set('X-App-Token', this.sodaOpts.apiToken);\n      }\n      if ((this.sodaOpts.username != null) && (this.sodaOpts.password != null)) {\n        client.set('Authorization', \"Basic \" + toBase64(\"\" + this.sodaOpts.username + \":\" + this.sodaOpts.password));\n      }\n      if (this.sodaOpts.accessToken != null) {\n        client.set('Authorization', \"OAuth \" + accessToken);\n      }\n      if (opts.query != null) {\n        client.query(opts.query);\n      }\n      if (data != null) {\n        client.send(data);\n      }\n      return function(responseHandler) {\n        return client.end(responseHandler || _this.getDefaultHandler());\n      };\n    };\n  }\n\n  Connection.prototype.getDefaultHandler = function() {\n    var emitter, handler;\n    this.emitter = emitter = new EventEmitter(this.emitterOpts);\n    return handler = function(error, response) {\n      var _ref;\n      if (response.ok) {\n        if (response.accepted) {\n          emitter.emit('progress', response.body);\n          setTimeout((function() {\n            return this.consumer.networker(opts)(handler);\n          }), 5000);\n        } else {\n          emitter.emit('success', response.body);\n        }\n      } else {\n        emitter.emit('error', (_ref = response.body) != null ? _ref : response.text);\n      }\n      return emitter.emit('complete', response);\n    };\n  };\n\n  return Connection;\n\n})();\n\nConsumer = (function() {\n  function Consumer(dataSite, sodaOpts) {\n    this.dataSite = dataSite;\n    this.sodaOpts = sodaOpts != null ? sodaOpts : {};\n    this.connection = new Connection(this.dataSite, this.sodaOpts);\n  }\n\n  Consumer.prototype.query = function() {\n    return new Query(this);\n  };\n\n  Consumer.prototype.getDataset = function(id) {\n    var emitter;\n    return emitter = new EventEmitter(this.emitterOpts);\n  };\n\n  return Consumer;\n\n})();\n\nProducer = (function() {\n  function Producer(dataSite, sodaOpts) {\n    this.dataSite = dataSite;\n    this.sodaOpts = sodaOpts != null ? sodaOpts : {};\n    this.connection = new Connection(this.dataSite, this.sodaOpts);\n  }\n\n  Producer.prototype.operation = function() {\n    return new Operation(this);\n  };\n\n  return Producer;\n\n})();\n\nOperation = (function() {\n  function Operation(producer) {\n    this.producer = producer;\n  }\n\n  Operation.prototype.withDataset = function(datasetId) {\n    this._datasetId = datasetId;\n    return this;\n  };\n\n  Operation.prototype.truncate = function() {\n    var opts;\n    opts = {\n      method: 'delete'\n    };\n    opts.path = \"/resource/\" + this._datasetId;\n    return this._exec(opts);\n  };\n\n  Operation.prototype.add = function(data) {\n    var obj, opts, _data, _i, _len;\n    opts = {\n      method: 'post'\n    };\n    opts.path = \"/resource/\" + this._datasetId;\n    _data = JSON.parse(JSON.stringify(data));\n    delete _data[':id'];\n    delete _data[':delete'];\n    for (_i = 0, _len = _data.length; _i < _len; _i++) {\n      obj = _data[_i];\n      delete obj[':id'];\n      delete obj[':delete'];\n    }\n    return this._exec(opts, _data);\n  };\n\n  Operation.prototype[\"delete\"] = function(id) {\n    var opts;\n    opts = {\n      method: 'delete'\n    };\n    opts.path = \"/resource/\" + this._datasetId + \"/\" + id;\n    return this._exec(opts);\n  };\n\n  Operation.prototype.update = function(id, data) {\n    var opts;\n    opts = {\n      method: 'post'\n    };\n    opts.path = \"/resource/\" + this._datasetId + \"/\" + id;\n    return this._exec(opts, data);\n  };\n\n  Operation.prototype.replace = function(id, data) {\n    var opts;\n    opts = {\n      method: 'put'\n    };\n    opts.path = \"/resource/\" + this._datasetId + \"/\" + id;\n    return this._exec(opts, data);\n  };\n\n  Operation.prototype.upsert = function(data) {\n    var opts;\n    opts = {\n      method: 'post'\n    };\n    opts.path = \"/resource/\" + this._datasetId;\n    return this._exec(opts, data);\n  };\n\n  Operation.prototype._exec = function(opts, data) {\n    if (this._datasetId == null) {\n      throw new Error('no dataset given to work against!');\n    }\n    this.producer.connection.networker(opts, data)();\n    return this.producer.connection.emitter;\n  };\n\n  return Operation;\n\n})();\n\nQuery = (function() {\n  function Query(consumer) {\n    this.consumer = consumer;\n    this._select = [];\n    this._where = [];\n    this._group = [];\n    this._having = [];\n    this._order = [];\n    this._offset = this._limit = this._q = null;\n  }\n\n  Query.prototype.withDataset = function(datasetId) {\n    this._datasetId = datasetId;\n    return this;\n  };\n\n  Query.prototype.soql = function(query) {\n    this._soql = query;\n    return this;\n  };\n\n  Query.prototype.select = function() {\n    var select, selects, _i, _len;\n    selects = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    for (_i = 0, _len = selects.length; _i < _len; _i++) {\n      select = selects[_i];\n      this._select.push(select);\n    }\n    return this;\n  };\n\n  Query.prototype.where = function() {\n    var args;\n    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    addExpr(this._where, args);\n    return this;\n  };\n\n  Query.prototype.having = function() {\n    var args;\n    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    addExpr(this._having, args);\n    return this;\n  };\n\n  Query.prototype.group = function() {\n    var group, groups, _i, _len;\n    groups = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    for (_i = 0, _len = groups.length; _i < _len; _i++) {\n      group = groups[_i];\n      this._group.push(group);\n    }\n    return this;\n  };\n\n  Query.prototype.order = function() {\n    var order, orders, _i, _len;\n    orders = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    for (_i = 0, _len = orders.length; _i < _len; _i++) {\n      order = orders[_i];\n      this._order.push(handleOrder(order));\n    }\n    return this;\n  };\n\n  Query.prototype.offset = function(offset) {\n    this._offset = offset;\n    return this;\n  };\n\n  Query.prototype.limit = function(limit) {\n    this._limit = limit;\n    return this;\n  };\n\n  Query.prototype.q = function(q) {\n    this._q = q;\n    return this;\n  };\n\n  Query.prototype.getOpts = function() {\n    var k, opts, queryComponents, v;\n    opts = {\n      method: 'get'\n    };\n    if (this._datasetId == null) {\n      throw new Error('no dataset given to work against!');\n    }\n    opts.path = \"/resource/\" + this._datasetId + \".json\";\n    queryComponents = this._buildQueryComponents();\n    opts.query = {};\n    for (k in queryComponents) {\n      v = queryComponents[k];\n      opts.query['$' + k] = v;\n    }\n    return opts;\n  };\n\n  Query.prototype.getURL = function() {\n    var opts, query;\n    opts = this.getOpts();\n    query = toQuerystring(opts.query);\n    return (\"https://\" + this.consumer.dataSite + opts.path) + (query ? \"?\" + query : \"\");\n  };\n\n  Query.prototype.getRows = function() {\n    var opts;\n    opts = this.getOpts();\n    this.consumer.connection.networker(opts)();\n    return this.consumer.connection.emitter;\n  };\n\n  Query.prototype._buildQueryComponents = function() {\n    var query;\n    query = {};\n    if (this._soql != null) {\n      query.query = this._soql;\n    } else {\n      if (this._select.length > 0) {\n        query.select = this._select.join(', ');\n      }\n      if (this._where.length > 0) {\n        query.where = expr.and.apply(this, this._where);\n      }\n      if (this._group.length > 0) {\n        query.group = this._group.join(', ');\n      }\n      if (this._having.length > 0) {\n        if (!(this._group.length > 0)) {\n          throw new Error('Having provided without group by!');\n        }\n        query.having = expr.and.apply(this, this._having);\n      }\n      if (this._order.length > 0) {\n        query.order = this._order.join(', ');\n      }\n      if (isNumber(this._offset)) {\n        query.offset = this._offset;\n      }\n      if (isNumber(this._limit)) {\n        query.limit = this._limit;\n      }\n      if (this._q) {\n        query.q = this._q;\n      }\n    }\n    return query;\n  };\n\n  return Query;\n\n})();\n\nDataset = (function() {\n  function Dataset(data, client) {\n    this.data = data;\n    this.client = client;\n  }\n\n  return Dataset;\n\n})();\n\nextend(typeof exports !== \"undefined\" && exports !== null ? exports : this.soda, {\n  Consumer: Consumer,\n  Producer: Producer,\n  expr: expr,\n  _internal: {\n    Connection: Connection,\n    Query: Query,\n    Operation: Operation,\n    util: {\n      toBase64: toBase64,\n      handleLiteral: handleLiteral,\n      handleOrder: handleOrder\n    }\n  }\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}